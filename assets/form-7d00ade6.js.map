{"version":3,"file":"form-7d00ade6.js","sources":["../../src/form.js"],"sourcesContent":["// Opisany w dokumentacji\nimport iziToast from 'izitoast';\n// Opcjonalny import stylÃ³w\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input');\nconst galleryList = document.querySelector('.gallery-list');\nconst result = document.querySelector('.result');\n\nconst createToggle = selector => ({\n  enable: () => document.querySelector(selector).classList.remove('disabled'),\n  disable: () => document.querySelector(selector).classList.add('disabled'),\n});\n\nconst loader = createToggle('.text');\nconst loadText = createToggle('.loading-text');\nconst resultText = createToggle('.result-text');\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  const request = input.value;\n  fetchImages(request);\n});\nfunction fetchImages(request) {\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const params = new URLSearchParams({\n    key: '45116673-24298b0cd3e8b5c60e15e7e67',\n    q: request,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n\n  const url = `${BASE_URL}?${params}`;\n  loader.enable();\n  loadText.enable();\n\n  fetch(url)\n    .then(res => {\n      if (!res.ok) {\n        throw new Error(`Error! status: ${res.status}`);\n      }\n      return res.json();\n    })\n    .then(data => {\n      loader.disable();\n      loadText.disable();\n      resultText.enable();\n      result.textContent = input.value;\n\n      if (data.hits) {\n        displayImages(data.hits);\n      } else {\n        iziToast.warning({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#ef4040',\n          messageColor: '#fff',\n        });\n      }\n    })\n    .catch(error => {\n      loader.disable();\n      loadText.disable();\n      console.error(error);\n      iziToast.warning({\n        title: 'Error',\n        message: 'An error occurred while fetching images',\n      });\n    });\n}\n\nconst message =\n  'Sorry, there are no images matching your search query. Please try again!';\n\nfunction displayImages(images) {\n  galleryList.innerHTML = '';\n  if (images.length === 0) {\n    loader.disable();\n    loadText.disable();\n    resultText.disable();\n\n    iziToast.warning({\n      message: message,\n      backgroundColor: '#ef4040',\n      messageColor: `#fff`,\n      position: 'topRight',\n      timeout: 2000,\n    });\n    setTimeout(clearValue, 2000);\n\n    return;\n  }\n  const imagesMarkup = images.map(makeImgItem).join('');\n  galleryList.insertAdjacentHTML('beforeend', imagesMarkup);\n  setTimeout(clearValue, 500);\n\n  lightbox.refresh();\n}\n\nfunction clearValue() {\n  input.value = '';\n}\n\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: true,\n  className: 'simpleLightboxGallery',\n  doubleTapZoom: 2,\n  scrollZoom: true,\n  overlay: true,\n});\n\nfunction makeImgItem({\n  webformatURL,\n  tags,\n  downloads,\n  likes,\n  comments,\n  views,\n}) {\n  return `<li class=\"list-container\">\n    <div >\n      <div class=\"image-container\">\n        <a href=\"${webformatURL}\" data-source=\"${webformatURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n      </div>\n      <div class=\"descr-element\">\n        <ul class=\"descr-list\">\n          <li>\n            <h3>Likes</h3>\n              <p>${likes}</p>\n          </li>\n          <li>\n            <h3>Views</h3>\n              <p>${views}</p>\n          </li>\n          <li>\n            <h3>Comments</h3>\n            <p>${comments}</p>\n          </li>\n          <li>\n            <h3>Downloads</h3>\n              <p>${downloads}</p>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </li>`;\n}\n"],"names":["form","input","galleryList","result","createToggle","selector","loader","loadText","resultText","event","request","fetchImages","BASE_URL","params","url","res","data","displayImages","iziToast","error","message","images","clearValue","imagesMarkup","makeImgItem","lightbox","SimpleLightbox","webformatURL","tags","downloads","likes","comments","views"],"mappings":"gDAOA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAeC,IAAa,CAChC,OAAQ,IAAM,SAAS,cAAcA,CAAQ,EAAE,UAAU,OAAO,UAAU,EAC1E,QAAS,IAAM,SAAS,cAAcA,CAAQ,EAAE,UAAU,IAAI,UAAU,CAC1E,GAEMC,EAASF,EAAa,OAAO,EAC7BG,EAAWH,EAAa,eAAe,EACvCI,EAAaJ,EAAa,cAAc,EAE9CJ,EAAK,iBAAiB,SAAUS,GAAS,CACvCA,EAAM,eAAc,EACpB,MAAMC,EAAUT,EAAM,MACtBU,EAAYD,CAAO,CACrB,CAAC,EACD,SAASC,EAAYD,EAAS,CAC5B,MAAME,EAAW,2BAEXC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,EAEKI,EAAM,GAAGF,CAAQ,IAAIC,CAAM,GACjCP,EAAO,OAAM,EACbC,EAAS,OAAM,EAEf,MAAMO,CAAG,EACN,KAAKC,GAAO,CACX,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAM,kBAAkBA,EAAI,MAAM,EAAE,EAEhD,OAAOA,EAAI,MACjB,CAAK,EACA,KAAKC,GAAQ,CACZV,EAAO,QAAO,EACdC,EAAS,QAAO,EAChBC,EAAW,OAAM,EACjBL,EAAO,YAAcF,EAAM,MAEvBe,EAAK,KACPC,EAAcD,EAAK,IAAI,EAEvBE,EAAS,QAAQ,CACf,QACE,2EACF,gBAAiB,UACjB,aAAc,MACxB,CAAS,CAET,CAAK,EACA,MAAMC,GAAS,CACdb,EAAO,QAAO,EACdC,EAAS,QAAO,EAChB,QAAQ,MAAMY,CAAK,EACnBD,EAAS,QAAQ,CACf,MAAO,QACP,QAAS,yCACjB,CAAO,CACP,CAAK,CACL,CAEA,MAAME,EACJ,2EAEF,SAASH,EAAcI,EAAQ,CAE7B,GADAnB,EAAY,UAAY,GACpBmB,EAAO,SAAW,EAAG,CACvBf,EAAO,QAAO,EACdC,EAAS,QAAO,EAChBC,EAAW,QAAO,EAElBU,EAAS,QAAQ,CACf,QAASE,EACT,gBAAiB,UACjB,aAAc,OACd,SAAU,WACV,QAAS,GACf,CAAK,EACD,WAAWE,EAAY,GAAI,EAE3B,MACD,CACD,MAAMC,EAAeF,EAAO,IAAIG,CAAW,EAAE,KAAK,EAAE,EACpDtB,EAAY,mBAAmB,YAAaqB,CAAY,EACxD,WAAWD,EAAY,GAAG,EAE1BG,EAAS,QAAO,CAClB,CAEA,SAASH,GAAa,CACpBrB,EAAM,MAAQ,EAChB,CAEA,MAAMwB,EAAW,IAAIC,EAAe,kBAAmB,CACrD,SAAU,GACV,aAAc,MACd,aAAc,IACd,MAAO,GACP,UAAW,wBACX,cAAe,EACf,WAAY,GACZ,QAAS,EACX,CAAC,EAED,SAASF,EAAY,CACnB,aAAAG,EACA,KAAAC,EACA,UAAAC,EACA,MAAAC,EACA,SAAAC,EACA,MAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA;AAAA,mBAGUL,CAAY,kBAAkBA,CAAY;AAAA,sBACvCA,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAO7BE,CAAK;AAAA;AAAA;AAAA;AAAA,mBAILE,CAAK;AAAA;AAAA;AAAA;AAAA,iBAIPD,CAAQ;AAAA;AAAA;AAAA;AAAA,mBAINF,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,QAM5B"}